import{j as e,B as n,o as z,p as B,q as V,s as H,r as i,k as O,t as L,I as R,v as K,w as U}from"./index-kz_KmYqn.js";import{T as q,a as P,b as G,c as J}from"./tabs-C8HBKS2S.js";import{T as Q,a as W,b as y,c,d as X,e as o,B as C}from"./table-5kSjqWcC.js";import{C as Y,a as Z,b as _,d as $,c as ee}from"./card-DezR5XwD.js";import{D as se,a as ae,b as te,c as re,d as ie,e as ne}from"./dialog-DlAyJN_R.js";import{S as le}from"./switch-BBObvC76.js";import{z as g}from"./index-DXqQCM1T.js";import{u as ce,t as oe,F as de,a as b,b as f,c as v,d as N,f as T,e as w}from"./form-DcFddlnn.js";import"./index-DuiSBcde.js";const he=({data:d,onEditClick:h})=>e.jsxs(Q,{children:[e.jsx(W,{children:e.jsxs(y,{children:[e.jsx(c,{children:"Display Index"}),e.jsx(c,{className:"hidden sm:table-cell",children:"Category Name"}),e.jsx(c,{className:"hidden sm:table-cell",children:"Status"}),e.jsx(c,{className:"hidden md:table-cell text-right",children:"Actions"})]})}),e.jsx(X,{children:d.sort((a,x)=>a.displayIndex-x.displayIndex).map(a=>e.jsxs(y,{className:"text-xs 2xl:text-sm",children:[e.jsx(o,{className:"hidden sm:table-cell",children:a.displayIndex}),e.jsx(o,{className:"hidden sm:table-cell",children:a.categoryName}),e.jsx(o,{className:"hidden md:table-cell",children:a.isActive?e.jsx(C,{variant:"secondary",children:"Active"}):e.jsx(C,{variant:"secondary",children:"Inactive"})}),e.jsx(o,{className:"hidden sm:table-cell",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(n,{variant:"outline",size:"icon",children:e.jsx(z,{})}),e.jsx(n,{variant:"outline",size:"icon",children:e.jsx(B,{})}),e.jsx(n,{variant:"outline",size:"icon",onClick:()=>{h(a.id)},children:e.jsx(V,{})}),e.jsx(n,{variant:"outline",size:"icon",children:e.jsx(H,{})})]})})]},a.id))})]}),xe=g.object({categoryName:g.string().min(2).max(50),isActive:g.boolean()}),ve=()=>{const[d,h]=i.useState("categories"),{shopId:a}=O(),[x,l]=i.useState(!1),r=ce({resolver:oe(xe),defaultValues:{categoryName:"",isActive:!1}}),[j,D]=i.useState([]),[u,p]=i.useState(""),m=i.useCallback(async s=>{try{const t=await L({shopId:s,skip:0,take:100});D(t.data.menuCategories)}catch(t){console.log(t)}},[]);i.useEffect(()=>{a&&m(a)},[a]);const F=s=>{h(s)},I=s=>{l(s),r.reset()},S=async s=>{try{await K(s),r.reset(),l(!1),m(s.shopId)}catch(t){console.log(t)}},k=async s=>{try{await U(s),r.reset(),p(""),l(!1),m(s.shopId)}catch(t){console.log(t)}};function A(s){if(console.log(s),a){if(u){k({...s,id:u,shopId:a});return}S({...s,shopId:a})}}const M=s=>{const t=j.find(E=>E.id===s);t&&(r.setValue("categoryName",t.categoryName),r.setValue("isActive",t.isActive),p(s),l(!0))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Menu Categories & Cuisines"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(n,{onClick:()=>l(!0),children:"New Category"})})]}),e.jsxs(q,{orientation:"vertical",value:d,onValueChange:F,className:"space-y-4",children:[e.jsx("div",{className:"w-full pb-2",children:e.jsx(P,{children:e.jsx(G,{value:"categories",children:"Categories"})})}),e.jsx(J,{value:"categories",children:e.jsxs(Y,{className:"col-span-1",children:[e.jsxs(Z,{className:"px-7",children:[e.jsx(_,{children:"Manage Categories"}),e.jsx($,{children:"View and manage your your menu categories"})]}),e.jsx(ee,{children:e.jsx(he,{data:j,onEditClick:M})})]})})]}),e.jsx(se,{open:x,onOpenChange:I,children:e.jsx(ae,{className:"sm:max-w-[425px]",children:e.jsx(de,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(A),children:[e.jsxs(te,{children:[e.jsx(re,{children:"Create Category"}),e.jsx(ie,{children:"Fill up the details. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(b,{control:r.control,name:"categoryName",render:({field:s})=>e.jsxs(f,{children:[e.jsx(v,{children:"Category name"}),e.jsx(N,{children:e.jsx(R,{placeholder:"Enter category name",...s})}),e.jsx(T,{children:"This is your public display name."}),e.jsx(w,{})]})}),e.jsx(b,{control:r.control,name:"isActive",render:({field:s})=>e.jsxs(f,{className:"flex flex-row items-center space-y-0 gap-2",children:[e.jsx(N,{children:e.jsx(le,{id:"isActive",checked:s.value,onCheckedChange:s.onChange})}),e.jsx(v,{children:"Activated"}),e.jsx(T,{children:"This is your public display name."}),e.jsx(w,{})]})}),e.jsx(ne,{children:e.jsx(n,{type:"submit",children:"Save changes"})})]})]})})})})]})};export{ve as default};
