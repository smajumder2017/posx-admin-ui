import{G,j as e,S as t,F as m,B as S,q as J,s as K,k as Q,r as j,x as W,t as X,I as B,y as Y,z as Z}from"./index-kz_KmYqn.js";import{C as $,a as ee,b as se,d as ae,c as le}from"./card-DezR5XwD.js";import{T as ce,a as re,b as E,c as i,d as te,e as n,B as T}from"./table-5kSjqWcC.js";import{f as ie}from"./currency-87vpqOrX.js";import{D as ne,a as oe,b as de,c as he,d as me,e as xe}from"./dialog-DlAyJN_R.js";import{S as je}from"./switch-BBObvC76.js";import{z as d}from"./index-DXqQCM1T.js";import{u as pe,t as ue,F as ge,a as p,b as u,c as g,d as y,f as N,e as b}from"./form-DcFddlnn.js";import{T as ye}from"./textarea-DE_j_2qC.js";import{S as M,a as V,b as w,c as F,d as D,e as A,f as h}from"./select-DYAXBldv.js";import"./index-DuiSBcde.js";import"./index-BEk9yI-S.js";function H(r){return G({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M330.67 263.12V173.4l-52.75-24.22C219.44 218.76 197.58 400 56 400a56 56 0 0 0 0 112c212.64 0 370.65-122.87 419.18-210.34l-37.05-38.54zm131.09-128.37C493.92 74.91 477.18 26.48 458.62 3a8 8 0 0 0-11.93-.59l-22.9 23a8.06 8.06 0 0 0-.89 10.23c6.86 10.36 17.05 35.1-1.4 72.32A142.85 142.85 0 0 0 364.34 96c-28 0-54 8.54-76.34 22.59l74.67 34.29v78.24h89.09L506.44 288c3.26-12.62 5.56-25.63 5.56-39.31a154 154 0 0 0-50.24-113.94z"},child:[]}]})(r)}function Ne(r){return G({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M20 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm-1 16H5V5h14v14z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]}]})(r)}const be=r=>{const o=Array.from(Array(r.total));return e.jsx("div",{className:"flex",children:o.map((c,x)=>x<r.level?e.jsx(H,{className:"text-red-400"},x):e.jsx(H,{className:"text-gray-300"},x))})},fe=({data:r,onEditClick:o})=>e.jsxs(ce,{children:[e.jsx(re,{children:e.jsxs(E,{children:[e.jsx(i,{children:"Item"}),e.jsx(i,{className:"hidden sm:table-cell",children:"Description"}),e.jsx(i,{className:"hidden sm:table-cell",children:"Short Code"}),e.jsx(i,{className:"hidden sm:table-cell",children:"Categeory"}),e.jsx(i,{className:"hidden md:table-cell",children:"Type"}),e.jsx(i,{className:"hidden md:table-cell",children:"Spice Scale"}),e.jsx(i,{className:"hidden md:table-cell",children:"Price"}),e.jsx(i,{className:"hidden md:table-cell",children:"Availability"}),e.jsx(i,{className:"hidden md:table-cell text-center",children:"Actions"})]})}),e.jsx(te,{children:r.map(c=>{var v;const x=c.spiceScale===t.None?0:c.spiceScale===t.Mild?1:c.spiceScale===t.Moderate?2:3,I=c.foodType===m.Vegetarian?"text-green-500":c.foodType===m.NonVegetarian?"text-red-500":"text-blue-500";return e.jsxs(E,{className:"text-xs 2xl:text-sm",children:[e.jsx(n,{className:"hidden sm:table-cell",children:c.itemName}),e.jsx(n,{className:"hidden sm:table-cell",children:e.jsx("div",{className:"max-w-32 truncate sm:max-w-72 md:max-w-[31rem]",children:c.description})}),e.jsx(n,{className:"hidden sm:table-cell",children:e.jsx(T,{variant:"outline",children:c.shortCode})}),e.jsx(n,{className:"hidden md:table-cell",children:e.jsx(T,{variant:"secondary",children:(v=c.category)==null?void 0:v.categoryName})}),e.jsx(n,{className:"hidden sm:table-cell",children:e.jsxs(T,{variant:"outline",className:"gap-1",children:[e.jsx(Ne,{className:I}),c.foodType]})}),e.jsx(n,{className:"hidden sm:table-cell",children:e.jsx(be,{total:3,level:x})}),e.jsx(n,{className:"hidden sm:table-cell",children:ie(c.price)}),e.jsx(n,{className:"hidden sm:table-cell",children:c.availability?"Available":"Not Avialable"}),e.jsxs(n,{className:"flex justify-center gap-1",children:[e.jsx(S,{variant:"outline",size:"icon",onClick:()=>{o==null||o(c.id)},children:e.jsx(J,{})}),e.jsx(S,{variant:"outline",size:"icon",children:e.jsx(K,{})})]})]},c.id)})})]}),ve=d.object({itemName:d.string().min(2).max(50),description:d.string(),availability:d.boolean(),categoryId:d.string(),foodType:d.string(),spiceScale:d.string(),price:d.string()}),Be=()=>{const{shopId:r}=Q(),[o,c]=j.useState([]),[x,I]=j.useState([]),[v,f]=j.useState(!1),[k,z]=j.useState(""),l=pe({resolver:ue(ve),defaultValues:{itemName:"",description:"",categoryId:"",foodType:"",spiceScale:"",price:"",availability:!1}}),C=j.useCallback(async s=>{try{const a=await W({shopId:s,includes:"category",skip:0,take:100});c(a.data.menuItems)}catch(a){console.log(a)}},[]),L=j.useCallback(async s=>{try{const a=await X({shopId:s,skip:0,take:100});I(a.data.menuCategories)}catch(a){console.log(a)}},[]),P=async s=>{try{await Y(s),l.reset(),f(!1),C(s.shopId)}catch(a){console.log(a)}},O=async s=>{try{await Z(s),l.reset(),z(""),f(!1),C(s.shopId)}catch(a){console.log(a)}};function R(s){if(console.log(s),r){if(k){O({...s,id:k,shopId:r,price:parseInt(s.price)});return}P({...s,price:parseInt(s.price),shopId:r})}}const _=s=>{const a=o.find(U=>U.id===s);a&&(l.setValue("itemName",a.itemName),l.setValue("description",a.description),l.setValue("categoryId",a.categoryId),l.setValue("foodType",a.foodType),l.setValue("spiceScale",a.spiceScale),l.setValue("price",a.price.toString()),l.setValue("availability",a.availability),z(s),f(!0))},q=s=>{f(s),l.reset()};return j.useEffect(()=>{r&&(C(r),L(r))},[r,C]),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight md:text-3xl",children:"Menu Items"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx(S,{onClick:()=>f(!0),children:"New Item"})})]}),e.jsxs($,{className:"col-span-1",children:[e.jsxs(ee,{className:"px-7",children:[e.jsx(se,{children:"Manage Categories"}),e.jsx(ae,{children:"View and manage your your menu categories"})]}),e.jsx(le,{children:e.jsx(fe,{data:o,onEditClick:_})})]}),e.jsx(ne,{open:v,onOpenChange:q,children:e.jsx(oe,{className:"sm:max-w-[600px]",children:e.jsx(ge,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(R),children:[e.jsxs(de,{children:[e.jsx(he,{children:"Create Item"}),e.jsx(me,{children:"Fill up the details. Click save when you're done."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsx(p,{control:l.control,name:"itemName",render:({field:s})=>e.jsxs(u,{children:[e.jsx(g,{children:"Item Name"}),e.jsx(y,{children:e.jsx(B,{placeholder:"Enter item name",...s})}),e.jsx(N,{children:"This will be public item display name."}),e.jsx(b,{})]})}),e.jsx(p,{control:l.control,name:"description",render:({field:s})=>e.jsxs(u,{children:[e.jsx(g,{children:"Item Description"}),e.jsx(y,{children:e.jsx(ye,{placeholder:"Enter item description",...s})}),e.jsx(N,{children:"Add some description about this dish."}),e.jsx(b,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(p,{control:l.control,name:"categoryId",render:({field:s})=>e.jsxs(u,{className:"col-span-1",children:[e.jsx(g,{children:"Item Category"}),e.jsx(y,{children:e.jsxs(M,{onValueChange:s.onChange,value:s.value,children:[e.jsx(V,{className:"w-full",children:e.jsx(w,{placeholder:"Select a category"})}),e.jsx(F,{children:e.jsxs(D,{children:[e.jsx(A,{children:"Menu Categories"}),x.filter(a=>a.isActive).map(a=>e.jsx(h,{value:a.id,children:a.categoryName},a.id))]})})]})}),e.jsx(N,{children:"Adding a category will help user to search for a dish."}),e.jsx(b,{})]})}),e.jsx(p,{control:l.control,name:"foodType",render:({field:s})=>e.jsxs(u,{className:"col-span-1",children:[e.jsx(g,{children:"Food Type"}),e.jsx(y,{children:e.jsxs(M,{onValueChange:s.onChange,value:s.value,children:[e.jsx(V,{className:"w-full",children:e.jsx(w,{placeholder:"Choose food type"})}),e.jsx(F,{children:e.jsxs(D,{children:[e.jsx(A,{children:"Food Types"}),e.jsx(h,{value:m.Vegetarian,children:m.Vegetarian}),e.jsx(h,{value:m.NonVegetarian,children:m.NonVegetarian}),e.jsx(h,{value:m.VEGAN,children:m.VEGAN})]})})]})}),e.jsx(N,{children:"Add some description about this dish."}),e.jsx(b,{})]})})]}),e.jsx(p,{control:l.control,name:"spiceScale",render:({field:s})=>e.jsxs(u,{className:"col-span-1",children:[e.jsx(g,{children:"Spice Scale"}),e.jsx(y,{children:e.jsxs(M,{onValueChange:s.onChange,value:s.value,children:[e.jsx(V,{className:"w-full",children:e.jsx(w,{placeholder:"Choose spice scale"})}),e.jsx(F,{children:e.jsxs(D,{children:[e.jsx(A,{children:"Spice Scales"}),e.jsx(h,{value:t.None,children:t.None}),e.jsx(h,{value:t.Mild,children:t.Mild})," ",e.jsx(h,{value:t.Moderate,children:t.Moderate})," ",e.jsx(h,{value:t.Spicy,children:t.Spicy})]})})]})}),e.jsx(N,{children:"Add some description about this dish."}),e.jsx(b,{})]})}),e.jsx(p,{control:l.control,name:"price",render:({field:s})=>e.jsxs(u,{children:[e.jsx(g,{children:"Price"}),e.jsx(y,{children:e.jsx(B,{placeholder:"Enter item price",...s})}),e.jsx(N,{children:"This will be selling price of your dish."}),e.jsx(b,{})]})}),e.jsx(p,{control:l.control,name:"availability",render:({field:s})=>e.jsxs(u,{className:"flex flex-row items-center space-y-0 gap-2",children:[e.jsx(y,{children:e.jsx(je,{id:"availibility",checked:s.value,onCheckedChange:s.onChange})}),e.jsx(g,{children:"Available"}),e.jsx(N,{children:"Check this to mark your item available to serve"}),e.jsx(b,{})]})}),e.jsx(xe,{children:e.jsx(S,{type:"submit",children:"Save changes"})})]})]})})})})]})};export{Be as default};
